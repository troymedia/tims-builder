<?xml version="1.0" encoding="utf-8"?>
<s:BorderContainer xmlns:fx="http://ns.adobe.com/mxml/2009" 
		  xmlns:s="library://ns.adobe.com/flex/spark" 
		  xmlns:mx="library://ns.adobe.com/flex/mx"
		  xmlns:components="com.ecistm.tlpa.components.*"
		  cornerRadius="10"
		  backgroundColor="0x1e1e1e"
		  creationComplete="init()">
	<fx:Declarations>
		<components:SoundPlayer id="soundPlayer" url="{audio}"/>
		<fx:String id="feedbackText"/>
		<fx:String id="titleText"/>
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			
			import spark.components.NavigatorContent;
			import spark.primitives.BitmapImage;
			
			[Bindable] protected var hasMultipleFeedbackImages:Boolean;
			[Bindable] protected var dialogText:Array = [];
			
			[Bindable] public var audio:String = '';
			[Bindable] public var videoSource:String = '';
			[Bindable] public var imageSource:String = '';
			public var feedbackImages:ArrayCollection = new ArrayCollection();
			
			protected function init():void
			{
				soundPlayer.play();
				hasMultipleFeedbackImages = Boolean(feedbackImages.length > 1);
				populateImageStack(feedbackImages);
			}
			
			public function populateImageStack(images:ArrayCollection):void
			{
				for each(var img:Object in images)
				{
					var navContent:NavigatorContent = new NavigatorContent();
					navContent.percentHeight = navContent.percentWidth = 100;
					var image:BitmapImage = new BitmapImage();
					image.source = img.source;
					navContent.addElement(image);
					stack.addElement(navContent);
				}
				
				Alert.show(String(stack.numElements));
			}
			
			public function close():void
			{
				this.visible = false;
			}
			
		]]>
	</fx:Script>
	
	<s:layout>
		<s:BasicLayout/>
	</s:layout>
	
	<s:states>
		<s:State name="incorrectImageView"/>
		<s:State name="correctView"/>
		<s:State name="incorrectTextView"/>
	</s:states>
	
	<s:VGroup height="100%" width="100%" paddingBottom="5" paddingLeft="5" paddingRight="5" paddingTop="5" verticalAlign="middle" horizontalAlign="center">
		<mx:ViewStack id="stack" width="100%" height="100%">
			
		</mx:ViewStack>
		<!--<s:BitmapImage width="100%" height="100%"
					   source="{imageSource}"
					   excludeFrom="correctView, incorrectTextView"/>-->
		
		<s:HGroup width="100%" horizontalAlign="center" 
				  paddingBottom="5" paddingTop="5">
			<s:Button id="okButton" 
					  label.correctView="Continue"
					  label="Next Question"/>
			<s:Button id="cancelButton" 
					  label.correctView="Retry Quiz"
					  includeIn="correctView"/>
		</s:HGroup>
	</s:VGroup>
	
	<s:HGroup width="100%" height="100%" verticalAlign="middle" paddingLeft="5" paddingRight="5" visible="{hasMultipleFeedbackImages}">
		<s:Button label="Back"/>
		<s:Spacer width="100%"/>
		<s:Button label="Next"/>
	</s:HGroup>
	
</s:BorderContainer>
